{"version":3,"sources":["services/persons.js","components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Person","person","handleDelete","name","number","onClick","Persons","personsToShow","map","PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","showAll","handleToShowChange","Notification","errorMessage","className","message","App","useState","persons","setPersons","setNewName","setNewNumber","setShowAll","setMessage","setErrorMessage","useEffect","personsService","initialPersons","filter","toLowerCase","includes","event","console","log","target","preventDefault","personInThePhonebook","length","window","confirm","find","p","updatedPerson","returnedPerson","location","reload","catch","error","errorToShow","concat","setTimeout","deletedName","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bfdcd0a2.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","const Person = ({person, handleDelete}) => {\n    return (\n      <div>\n        {person.name} {person.number} <button onClick={() => handleDelete(person.id, person.name)} >delete</button>\n      </div>\n    )\n  }\n  \n  const Persons = ({personsToShow, handleDelete}) => {\n    return (\n      <ul>\n        {personsToShow.map(person =>\n        <Person key={person.name} person={person} handleDelete={handleDelete} />\n       )}\n      </ul>\n    )\n  }\n  \n  export default Persons; ","const PersonForm = (props) => {\n    \n    return (\n      <div>\n        <form onSubmit={props.addPerson}>\n          <div>\n            name: <input value={props.newName} onChange={props.handleNameChange} />\n          </div>\n          <br></br>\n          <div>\n            number: <input value={props.newNumber} onChange={props.handleNumberChange} />\n          </div>\n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n      </div>\n    )\n}\n\nexport default PersonForm\n","const Filter = (props) => {\n    return (\n      <div>\n        filter shown with <input value={props.showAll} onChange={props.handleToShowChange} />\n      </div>\n    )\n}\n\nexport default Filter","const Notification = (props) => {\n    if (props.errorMessage !== null) {\n  \n    return (\n      <div className=\"error\">\n        {props.errorMessage}\n      </div>\n    )\n    }\n  \n    if (props.message !== null) {\n  \n      return (\n        <div className=\"success\">\n          {props.message}\n        </div>\n      )\n    }\n  \n    return null\n  }\n  \n  export default Notification","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n\n  const [ persons, setPersons] = useState([\n    { name: 'Arto Hellas', number: '040-123456' },\n    { name: 'Ada Lovelace', number: '39-44-5323523' },\n    { name: 'Dan Abramov', number: '12-43-234345' },\n    { name: 'Mary Poppendieck', number: '39-23-6423122' }\n  ]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [showAll, setShowAll] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personInThePhonebook = persons.filter(\n      (person) => person.name === newName\n    );\n\n    if(personInThePhonebook.length > 0){\n      if(window.confirm(newName + ' is already added to the phonebook, replace the old number with a new one?')){\n\n        const id = personInThePhonebook[0].id\n        console.log(id)\n\n        const url = `/api/persons/${id}`\n        const person = persons.find(p => p.id === id)\n\n        const updatedPerson = {...person, number: newNumber}\n\n\n        personsService\n        .update(id, updatedPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.map(p => p.id !== id ? p : returnedPerson))\n          setNewName('');\n          setNewNumber('');\n          window.location.reload(true);\n        })\n        .catch(error => {\n          const errorToShow = error.response.data\n          console.log(errorToShow)\n          setErrorMessage('Information of ' + personInThePhonebook[0].name + ' has already been deleted from the server')\n          setPersons(persons.filter(p => p.id !== id))\n        });\n\n      }\n      \n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n    \n      personsService\n      .create(personObject)\n      .then(returnedPerson => {\n  \n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage(newName + ' added to the phonebook')\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n       const errorToShow = error.response.data\n        console.log(errorToShow)\n        setErrorMessage('Name needs to be longer than 3 characters and phonenumber needs to be longer than 5 numbers')\n      });\n    }\n  }\n\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleToShowChange = (event) => {\n    console.log(event.target.value)\n    setShowAll(event.target.value)\n  }\n\n  const handleDelete = (id, deletedName) => {\n    console.log(id)\n    console.log(deletedName)\n \n    const wantToDelete = window.confirm('Delete ' + deletedName +  '?')\n\n    if(wantToDelete){\n      personsService\n      .remove(id)\n      .then(() => {\n        window.location.reload(true);\n        setMessage(deletedName + ' deleted')\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n    }\n    \n  }\n\n  const personsToShow = persons.filter(person => { return person.name.toLowerCase().includes(showAll.toLowerCase())})\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification errorMessage={errorMessage} message={message} />\n      <Filter showAll={showAll} handleToShowChange={handleToShowChange} />\n      <PersonForm addPerson ={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} handleDelete={handleDelete}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}